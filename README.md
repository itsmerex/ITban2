## By R. Ponce. & A. Salida.

### 1. Retrieve Product Information:

* Write a query to fetch the names and descriptions of all products.

```sql
SELECT name, description
FROM products
```
<img width="663" alt="image" src="https://github.com/itsmerex/ITban2/assets/117786026/008fcde7-8cf4-4781-bbf0-ef17015a959e">

* Extend the previous query to include specific attributes such as color, size, and price.
```sql
SELECT name, description,
       JSON_EXTRACT(attributes, '$.color') AS color,
       JSON_EXTRACT(attributes, '$.size') AS size,
       JSON_EXTRACT(attributes, '$.price') AS price,
JSON_EXTRACT(attributes, '$.brand') AS brand
FROM products;
```
<img width="755" alt="image" src="https://github.com/itsmerex/ITban2/assets/117786026/8bc5a1ac-225f-4a6b-90ec-0dfb9007d5c2">

### 2. Query Orders and Order Details:
* Retrieve the details of all orders placed, including the order date, customer ID, product name, quantity, and price.

```sql
SELECT
    o.order_id,
    o.order_date,
    o.customer_id,
    p.name AS product_name,
    od.quantity,
    od.price
FROM
    orders o JOIN
    order_details od ON o.order_id = od.order_id
JOIN products p ON od.product_id = p.product_id;

<img width="759" alt="image" src="https://github.com/itsmerex/ITban2/assets/117786026/9b96f780-af9d-486c-9e41-b96e540901ae">

* Calculate the total cost of each order.

```sql
SELECT
    o.order_id,
    SUM(od.quantity * od.price) AS total_cost
FROM
    orders o
JOIN
    order_details od ON o.order_id = od.order_id
GROUP BY
    o.order_id;
```
<img width="758" alt="image" src="https://github.com/itsmerex/ITban2/assets/117786026/5bbac70c-98bf-433e-bfe2-5f6a86956d6f">

 ### 3.Filtering Products Based on Attributes:

 * Write a query to find all products with a price greater than $50.

   ```sql
   SELECT *
FROM products
WHERE JSON_EXTRACT(attributes, '$.price') > 50;
   ```
<img width="760" alt="image" src="https://github.com/itsmerex/ITban2/assets/117786026/fc5d8d13-b124-4064-b4c5-aba7b649b0b9">

* Filter products by color and brand, and display their names and prices.
```sql
SELECT name, JSON_EXTRACT(attributes, '$.price') AS price
FROM products
WHERE JSON_EXTRACT(attributes, '$.color') = 'teal' 
AND JSON_EXTRACT(attributes, '$.brand') = 'Nike';

```
<img width="757" alt="image" src="https://github.com/itsmerex/ITban2/assets/117786026/e43b303f-5098-4e20-bf54-ba228c41423c">

### 4. Calculating Aggregate Data:

* Calculate the total sales revenue generated by each product.
```sql
SELECT 
    p.product_id,
    p.name AS product_name,
    SUM(od.quantity * od.price) AS total_revenue
FROM 
    products p
JOIN 
    order_details od ON p.product_id = od.product_id
GROUP BY 
    p.product_id, p.name;
```
<img width="750" alt="image" src="https://github.com/itsmerex/ITban2/assets/117786026/e34ba9e3-7053-4111-961f-d5ba63f5aecf">

* Determine the total quantity of each product ordered.
  ```sql
  SELECT 
    p.product_id,
    p.name AS product_name,
    SUM(od.quantity) AS total_quantity
FROM 
    products p
JOIN 
    order_details od ON p.product_id = od.product_id
GROUP BY 
    p.product_id, p.name;
  ```
<img width="759" alt="image" src="https://github.com/itsmerex/ITban2/assets/117786026/c9d08328-71a9-4c51-bd2c-85aeade01e4f">


### 5. Advanced Filtering and Aggregation:

* Find the top 5 best-selling products based on total quantity sold.

```sql
SELECT
    p.product_id,
    p.name AS product_name,
    SUM(od.quantity) AS total_quantity_sold
FROM
    products p
JOIN
    order_details od ON p.product_id = od.product_id
GROUP BY
    p.product_id, p.name
ORDER BY
    total_quantity_sold DESC Limit 5;
```
<img width="766" alt="image" src="https://github.com/itsmerex/ITban2/assets/117786026/e0dcfb96-229e-445a-800e-adb26277fc24">

* Identify the average price of products from a specific brand.
 ```sql
SELECT
    AVG(JSON_EXTRACT(attributes, '$.price')) AS average_price,
    JSON_EXTRACT(attributes, '$.brand') AS brand
FROM
    products
WHERE
    JSON_EXTRACT(attributes, '$.brand') = 'Nike'
GROUP BY
    JSON_EXTRACT(attributes, '$.brand');

```
<img width="767" alt="image" src="https://github.com/itsmerex/ITban2/assets/117786026/9a593030-fa2b-4deb-99e9-e496f434c5f1">

### 6. Nested JSON Queries:

* Retrieve the color and size of a specific product.
```sql
SELECT
    JSON_EXTRACT(attributes, '$.color') AS color,
    JSON_EXTRACT(attributes, '$.size') AS size
FROM
    products
WHERE
    product_id = 1234;
```
<img width="766" alt="image" src="https://github.com/itsmerex/ITban2/assets/117786026/a3c682ad-3c55-4537-bf31-b6d132f60b48">

* Extract and display all available attributes of products in JSON format.
```sql
SELECT JSON_OBJECT(
    'product_id', product_id,
    'name', name,
    'description', description,
    'attributes', attributes
) AS product_info
FROM products;
```
<img width="765" alt="image" src="https://github.com/itsmerex/ITban2/assets/117786026/919da663-9164-45c1-ab18-ca62eea772ab">

### 7. Joining Multiple Tables:
* Write a query to find all orders placed by customers along with the products ordered and their quantities.
```sql
SELECT 
    o.order_id,
    o.order_date,
    c.customer_id,
    p.name AS product_name,
    od.quantity
FROM 
    orders o
JOIN 
    order_details od ON o.order_id = od.order_id
JOIN 
    products p ON od.product_id = p.product_id
JOIN 
    customers c ON o.customer_id = c.customer_id;
```

<img width="768" alt="image" src="https://github.com/itsmerex/ITban2/assets/117786026/ef9e3324-75c2-4353-90ce-1a8777df33f3">

* Calculate the total revenue generated by each customer.

  ```sql
  SELECT
    CONCAT(c.firstname, ' ', COALESCE(c.middlename, ''), ' ', c.lastname) AS full_name,
    c.customer_id,
    SUM(od.quantity * JSON_EXTRACT(p.attributes, '$.price')) AS total_revenue
FROM
    customers c
JOIN
    orders o ON c.customer_id = o.customer_id
JOIN
    order_details od ON o.order_id = od.order_id
JOIN
    products p ON od.product_id = p.product_id
GROUP BY
    c.customer_id, full_name;
  ```
<img width="765" alt="image" src="https://github.com/itsmerex/ITban2/assets/117786026/3106d154-73c6-45f5-9b48-ed3f57cf16a6">

### 8. Data Manipulation with JSON Functions:

* Update the price of a specific product stored as JSON attribute.

**The original price of the product id 120.**

```sql
SELECT product_id,
       JSON_EXTRACT(attributes, '$.price') AS price
FROM products
WHERE product_id=120;
```

<img width="557" alt="image" src="https://github.com/itsmerex/ITban2/assets/117786026/4006c497-ec13-4ec4-8ea7-68c36ac47a56">

**The query to update the specific price of the product id 120.**
```sql
UPDATE products
SET attributes = JSON_SET(attributes, '$.price', 500.00)
WHERE product_id = 120;
```
<img width="614" alt="image" src="https://github.com/itsmerex/ITban2/assets/117786026/df00e167-b30f-43aa-9559-675e48f6c1c3">

**Updated Price of the product id number 120.**
```sql
SELECT product_id,
       JSON_EXTRACT(attributes, '$.price') AS price
FROM products
WHERE product_id=120;
```
<img width="649" alt="image" src="https://github.com/itsmerex/ITban2/assets/117786026/cb7a375f-4e73-4945-8fa1-a80843b17056">

* Add a new attribute to all products with a default value.
  ```sql
  ALTER TABLE products ADD COLUMN weight VARCHAR(255) DEFAULT 'default_value';
  ```
<img width="508" alt="image" src="https://github.com/itsmerex/ITban2/assets/117786026/5e8e4420-cd38-4de5-b8f8-2f83e96bb714">

```sql
SELECT name, description,
       JSON_EXTRACT(attributes, '$.color') AS color,
       JSON_EXTRACT(attributes, '$.size') AS size,
       JSON_EXTRACT(attributes, '$.price') AS price,
 JSON_EXTRACT(attributes, '$.brand') AS brand,
       JSON_EXTRACT(attributes, '$.weight') AS weight
FROM products;
```
<img width="762" alt="image" src="https://github.com/itsmerex/ITban2/assets/117786026/cae61df6-80df-4316-97d1-14921d44fbc7">

### 9. Advanced JSON Operations:
* Find products with specific attributes that match a given criteria using JSON path expressions.
```sql
SELECT *
FROM products
WHERE JSON_EXTRACT(attributes, '$.color') = 'cyan'
  AND JSON_EXTRACT(attributes, '$.size') = 'S';
```
<img width="764" alt="image" src="https://github.com/itsmerex/ITban2/assets/117786026/4165f999-a989-449f-bfd4-3a5cc208eeb4">

* Extract and display the first element of an array stored within a JSON attribute.

  ```sql
  SELECT JSON_UNQUOTE(JSON_EXTRACT(attributes,'$.color')) 
AS first_element FROM `products`;
  ```
<img width="661" alt="image" src="https://github.com/itsmerex/ITban2/assets/117786026/04708ef1-c27d-42d4-bcbd-189eb401b271">

### THANK YOU!!!























   




